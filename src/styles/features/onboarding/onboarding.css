/* =================================
   ONBOARDING OVERLAY & STRUCTURE
   ================================= */

@utility onboarding-overlay {
	@apply fixed inset-0 bg-black/75 flex items-center justify-center z-[10000] opacity-0 invisible transition-all duration-200 p-5;

	&.visible {
		@apply opacity-100 visible;
	}

	&.closing {
		@apply opacity-0;
	}
}

@utility onboarding-popup {
	@apply max-w-[95%] w-[520px] rounded-xl shadow-2xl border border-white/5 flex flex-col;
	background-color: var(--color-bg-content);
	transform: scale(0.95) translateY(20px);
	transition: transform 250ms cubic-bezier(0.19, 1, 0.22, 1);
	max-height: 90vh;

	.onboarding-overlay.visible & {
		transform: scale(1) translateY(0);
	}
}

@utility onboarding-header {
	@apply flex items-center p-4 border-b border-white/5 flex-shrink-0 rounded-t-xl gap-3;
	background-color: var(--color-bg-tertiary);
}

@utility onboarding-header-logo {
	@apply flex-shrink-0 pr-3 border-r-2 border-white/20;

	& img {
		@apply h-10 w-auto;
	}
}

@utility onboarding-title {
	@apply text-lg font-semibold m-0 flex-1;
	color: var(--color-text-heading);
}

@utility onboarding-progress {
	@apply flex gap-2 ml-auto mr-2;
}

@utility onboarding-progress-dot {
	@apply w-2 h-2 rounded-full transition-all duration-200;
	background-color: var(--color-bg-content);

	&.active {
		background-color: var(--color-primary);
		@apply w-4;
	}

	&.completed {
		background-color: var(--color-success);
	}
}

@utility onboarding-close {
	@apply bg-black/20 border-none text-base cursor-pointer w-8 h-8 rounded-md flex items-center justify-center transition-all duration-200;
	color: var(--color-text);

	&:hover {
		@apply bg-white/10;
	}
}

@utility onboarding-content {
	@apply p-5 overflow-y-auto flex-1;
	min-height: min(300px, 50vh);
	max-height: calc(90vh - 180px);
	background-color: var(--color-bg-content);
}

@utility onboarding-actions {
	@apply flex justify-center gap-3 p-5 pt-4 border-t border-white/10 rounded-b-xl;
	background-color: var(--color-bg-content);
}

@utility onboarding-button-primary {
	@apply px-5 py-2.5 rounded-md text-sm font-medium cursor-pointer transition-all duration-200 border-none shadow-sm min-w-[100px];
	background-color: var(--color-primary);
	color: white;

	&:hover:not(:disabled) {
		background-color: var(--color-primary-hover);
		@apply shadow-md -translate-y-px;
	}

	&:disabled {
		@apply opacity-50 cursor-not-allowed;
	}
}

@utility onboarding-button-secondary {
	@apply px-5 py-2.5 rounded-md text-sm font-medium cursor-pointer transition-all duration-200 border-none shadow-sm min-w-[100px];
	background-color: var(--color-bg-tertiary);
	color: var(--color-text-primary);

	&:hover:not(:disabled) {
		background-color: var(--color-card-hover);
		@apply shadow-md -translate-y-px;
	}

	&:disabled {
		@apply opacity-50 cursor-not-allowed;
	}
}

/* =================================
   WELCOME MODAL CONTENT
   ================================= */

@utility onboarding-welcome-logo {
	@apply flex justify-center mb-2;

	& img {
		@apply h-24 w-auto;
	}
}

@utility onboarding-welcome-content {
	@apply flex flex-col gap-4;
}

@utility onboarding-welcome-description {
	@apply text-base leading-relaxed m-0;
	color: var(--color-text);
}

@utility onboarding-welcome-agreements {
	@apply flex flex-col gap-3;
}

@utility onboarding-agreement-item {
	@apply flex items-start gap-3 p-3 rounded-lg cursor-pointer transition-colors duration-200;
	background-color: var(--color-bg-tertiary);

	&:hover {
		background-color: var(--color-card-hover);
	}
}

@utility onboarding-agreement-checkbox {
	@apply sr-only;

	&:focus + .onboarding-agreement-checkmark {
		@apply ring-2 ring-offset-2;
		--tw-ring-color: var(--color-primary);
		--tw-ring-offset-color: var(--color-bg-tertiary);
	}
}

@utility onboarding-agreement-checkmark {
	@apply flex-shrink-0 w-5 h-5 rounded border-2 transition-all duration-200 flex items-center justify-center mt-0.5;
	border-color: var(--color-text-subtle);
	background-color: transparent;
	color: white;

	&.checked {
		background-color: var(--color-primary);
		border-color: var(--color-primary);
	}
}

@utility onboarding-agreement-text {
	@apply text-sm leading-relaxed;
	color: var(--color-text);

	& a {
		color: var(--color-primary) !important;
		@apply underline font-medium;

		&:hover {
			@apply decoration-2;
		}
	}
}

@utility onboarding-finish-title {
	@apply text-xl font-semibold m-0 text-center;
	color: var(--color-text-heading);
}

@utility onboarding-welcome-link {
	color: var(--color-primary) !important;
	@apply underline font-medium;

	&:hover {
		@apply decoration-2;
	}
}

/* =================================
   GUIDE STEP CONTENT
   ================================= */

@utility guide-step {
	@apply flex flex-col gap-4;
}

@utility guide-step-title {
	@apply text-base font-semibold m-0;
	color: var(--color-text-heading);
}

@utility guide-step-description {
	@apply text-sm leading-relaxed m-0;
	color: var(--color-text-subtle);
}

/* =================================
   STATUS GRID
   ================================= */

@utility guide-status-grid {
	@apply grid gap-3;
	grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
}

@utility guide-status-item {
	@apply flex items-start gap-3 p-3 rounded-lg;
	background-color: var(--color-bg-tertiary);
}

@utility guide-status-icon {
	@apply flex-shrink-0 flex items-center justify-center w-10 h-10 rounded-lg;
	background-color: var(--color-bg-content);
}

@utility guide-status-info {
	@apply flex flex-col gap-0.5 min-w-0;
}

@utility guide-status-name {
	@apply text-sm font-medium;
	color: var(--color-text-heading);
}

@utility guide-status-desc {
	@apply text-xs leading-relaxed;
	color: var(--color-text-subtle);
}

/* =================================
   BADGES GRID
   ================================= */

@utility guide-badges-grid {
	@apply grid gap-3;
	grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
}

@utility guide-badge-item {
	@apply flex items-start gap-3 p-3 rounded-lg;
	background-color: var(--color-bg-tertiary);
}

@utility guide-badge-icon {
	@apply flex-shrink-0 flex items-center justify-center w-7 h-7 rounded-md;
}

@utility guide-badge-info {
	@apply flex flex-col gap-0.5 min-w-0;
}

@utility guide-badge-name {
	@apply text-sm font-medium;
	color: var(--color-text-heading);
}

@utility guide-badge-desc {
	@apply text-xs leading-relaxed;
	color: var(--color-text-subtle);
}

/* =================================
   FEATURES LIST
   ================================= */

@utility guide-features-list {
	@apply flex flex-col gap-3;
}

@utility guide-feature-card {
	@apply flex flex-col rounded-lg overflow-hidden border border-white/10;
	background-color: var(--color-bg-tertiary);
}

@utility guide-feature-header {
	@apply flex items-center gap-4 p-4 w-full text-left cursor-pointer transition-colors duration-200 border-none;
	background-color: transparent;

	&:hover {
		background-color: var(--color-bg-content);
	}
}

@utility guide-feature-images {
	@apply w-full flex flex-col;

	& img {
		@apply w-full h-auto block;
	}
}

@utility guide-feature-icon {
	@apply flex-shrink-0 flex items-center justify-center w-10 h-10 rounded-lg;
}

@utility guide-feature-info {
	@apply flex flex-col gap-1 min-w-0 flex-1;
}

@utility guide-feature-title {
	@apply text-sm font-semibold;
	color: var(--color-text-heading);
}

@utility guide-feature-desc {
	@apply text-sm leading-relaxed;
	color: var(--color-text-subtle);
}

@utility guide-feature-chevron {
	@apply ml-auto flex-shrink-0 transition-transform duration-200;
	color: var(--color-text-subtle);

	&.expanded {
		transform: rotate(180deg);
	}
}

/* =================================
   SCOPE SECTIONS
   ================================= */

@utility guide-scope-sections {
	@apply flex flex-col gap-4;
}

@utility guide-scope-section {
	@apply flex flex-col gap-2;
}

@utility guide-scope-heading {
	@apply flex items-center gap-2 text-sm font-semibold px-3 py-2 rounded-md;
}

@utility guide-scope-heading-detect {
	background-color: var(--color-success-bg);
	color: var(--color-success);
}

@utility guide-scope-heading-not-detect {
	background-color: var(--color-error-bg);
	color: var(--color-error);
}

@utility guide-scope-list {
	@apply flex flex-col gap-2 pl-2;
}

@utility guide-scope-item {
	@apply flex items-center gap-3 p-3 rounded-lg;
	background-color: var(--color-bg-tertiary);
}

@utility guide-scope-item-icon {
	@apply flex-shrink-0 flex items-center justify-center w-8 h-8 rounded-md;
}

@utility guide-scope-item-icon-detect {
	background-color: var(--color-success-bg);
	color: var(--color-success);
}

@utility guide-scope-item-icon-not-detect {
	background-color: var(--color-error-bg);
	color: var(--color-error);
}

@utility guide-scope-item-text {
	@apply text-sm;
	color: var(--color-text);
}

@utility guide-scope-explanation {
	@apply p-3 rounded-lg;
	background-color: var(--color-bg-tertiary);
}

@utility guide-scope-explanation-text {
	@apply text-sm leading-relaxed m-0;
	color: var(--color-text-subtle);
}

/* =================================
   CLOSE CONFIRMATION DIALOG
   ================================= */

@utility onboarding-confirm-overlay {
	@apply fixed inset-0 bg-black/85 flex items-center justify-center z-[10001] opacity-0 invisible transition-all duration-200;

	&.visible {
		@apply opacity-100 visible;
	}
}

@utility onboarding-confirm-popup {
	@apply max-w-[95%] w-[380px] rounded-xl shadow-2xl border border-white/5 p-5 flex flex-col gap-4;
	background-color: var(--color-bg-content);
	transform: scale(0.95);
	transition: transform 200ms cubic-bezier(0.19, 1, 0.22, 1);

	.onboarding-confirm-overlay.visible & {
		transform: scale(1);
	}
}

@utility onboarding-confirm-title {
	@apply text-base font-semibold m-0;
	color: var(--color-text-heading);
}

@utility onboarding-confirm-message {
	@apply text-sm leading-relaxed m-0;
	color: var(--color-text-subtle);
}

@utility onboarding-confirm-actions {
	@apply flex justify-end gap-3 mt-2;
}

/* =================================
   LANGUAGE MODAL CONTENT
   ================================= */

@utility onboarding-language-intro {
	@apply mb-5;

	& p {
		@apply text-sm leading-relaxed m-0;
		color: var(--color-text);
	}
}

@utility onboarding-language-sections {
	@apply flex flex-col gap-5;
}

@utility onboarding-language-section {
	@apply flex flex-col gap-3 p-4 rounded-lg;
	background-color: var(--color-bg-tertiary);
}

@utility onboarding-language-section-header {
	@apply flex items-center gap-3;
}

@utility onboarding-language-icon {
	@apply flex items-center justify-center w-9 h-9 rounded-lg flex-shrink-0;
	background-color: var(--color-bg-content);
	color: var(--color-primary);
}

@utility onboarding-language-label {
	@apply text-sm font-semibold m-0;
	color: var(--color-text-heading);
}

@utility onboarding-select-wrapper {
	@apply relative;
}

@utility onboarding-language-select {
	@apply w-full px-3 py-2.5 pr-10 rounded-md text-sm border-none cursor-pointer appearance-none;
	background-color: var(--color-bg-content);
	color: var(--color-text);

	&:focus {
		@apply outline-none ring-2;
		--tw-ring-color: var(--color-primary);
	}
}

@utility onboarding-select-chevron {
	@apply absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none;
	color: var(--color-text-subtle);
}

@utility onboarding-translate-description {
	@apply text-xs leading-relaxed m-0;
	color: var(--color-text-subtle);
}

@utility onboarding-toggle-wrapper {
	@apply flex items-center gap-3 cursor-pointer;
}

@utility onboarding-toggle-input {
	@apply sr-only;

	&:checked + .onboarding-toggle-slider {
		background-color: var(--color-primary);
	}

	&:checked + .onboarding-toggle-slider::before {
		transform: translateX(16px);
	}

	&:focus + .onboarding-toggle-slider {
		@apply ring-2 ring-offset-2;
		--tw-ring-color: var(--color-primary);
		--tw-ring-offset-color: var(--color-bg-tertiary);
	}
}

@utility onboarding-toggle-slider {
	@apply relative inline-block w-10 h-6 rounded-full transition-colors duration-200 flex-shrink-0;
	background-color: var(--color-bg-content);

	&::before {
		content: '';
		@apply absolute top-1 left-1 w-4 h-4 rounded-full transition-transform duration-200;
		background-color: white;
	}
}

@utility onboarding-toggle-label {
	@apply text-sm;
	color: var(--color-text);
}

/* =================================
   PRESET MODAL CONTENT
   ================================= */

@utility onboarding-preset-intro {
	@apply mb-5;

	& p {
		@apply text-sm leading-relaxed m-0;
		color: var(--color-text);
	}
}

@utility onboarding-preset-cards {
	@apply grid grid-cols-2 gap-4;
}

@utility onboarding-preset-card {
	@apply flex flex-col items-center gap-3 p-5 rounded-xl cursor-pointer transition-all duration-200 border-2;
	background-color: var(--color-bg-tertiary);
	border-color: transparent;

	&:hover {
		background-color: var(--color-card-hover);
		border-color: var(--color-border-subtle);
	}

	&:focus {
		@apply outline-none;
		border-color: var(--color-primary);
	}

	&.selected {
		border-color: var(--color-primary);
		background-color: color-mix(in srgb, var(--color-primary) 10%, var(--color-bg-tertiary));
	}
}

@utility onboarding-preset-icon {
	@apply mb-2;
	color: var(--color-text-subtle);
}

@utility onboarding-preset-title {
	@apply text-base font-semibold text-center;
	color: var(--color-text-heading);
}

@utility onboarding-preset-description {
	@apply text-xs text-center leading-relaxed;
	color: var(--color-text-subtle);
}

@utility onboarding-preset-notice {
	@apply flex items-center gap-2 mt-5 p-3 rounded-lg text-xs;
	background-color: var(--color-bg-tertiary);
	color: var(--color-text-subtle);
}
