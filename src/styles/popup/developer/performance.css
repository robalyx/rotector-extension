/* =================================
   PERFORMANCE DASHBOARD
   ================================= */

@utility perf-dashboard-container {
	@apply flex flex-col w-full relative;
	gap: 0.75rem;
}

@utility perf-dashboard-header {
	@apply flex items-center justify-between;
	padding-bottom: 0.5rem;
	border-bottom: 1px solid var(--color-border);
}

@utility perf-dashboard-back-button {
	@apply flex items-center;
	gap: 0.25rem;
	padding: 0.25rem 0.5rem;
	font-size: 0.75rem;
	font-weight: 500;
	color: var(--color-text-subtle);
	background-color: transparent;
	border: 1px solid var(--color-border);
	border-radius: 0.25rem;
	cursor: pointer;
	transition: all 0.2s ease;

	&:hover {
		color: var(--color-text);
		border-color: var(--color-text-subtle);
		background-color: var(--color-hover);
	}

	&:active {
		transform: scale(0.95);
	}
}

@utility perf-dashboard-actions {
	@apply flex items-center gap-1;
}

@utility perf-dashboard-action-button {
	@apply flex items-center justify-center w-7 h-7 rounded border cursor-pointer transition-all duration-200;
	border-color: var(--color-border);
	background-color: var(--color-bg-content);
	color: var(--color-text-subtle);

	&:hover:not(:disabled) {
		background-color: var(--color-hover);
		border-color: var(--color-text-subtle);
		color: var(--color-text);
	}

	&:disabled {
		opacity: 0.4;
		cursor: not-allowed;
	}

	&.perf-dashboard-action-danger:hover:not(:disabled) {
		background-color: var(--color-error);
		border-color: var(--color-error);
		color: white;
	}
}

@utility perf-dashboard-title {
	@apply m-0 text-center;
	font-size: 1rem;
	font-weight: 600;
	color: var(--color-text-heading);
}

/* =================================
   SECTION HEADERS
   ================================= */

@utility perf-section-header {
	@apply flex items-center gap-1.5 m-0 text-2xs font-semibold uppercase tracking-wider;
	color: var(--color-text-subtle);
}

/* =================================
   CATEGORY OVERVIEW
   ================================= */

@utility perf-category-list {
	@apply flex flex-col gap-1.5;
}

@utility perf-category-row {
	@apply flex items-center gap-2 px-2 py-1.5 rounded;
	background-color: var(--color-bg-content);
	border: 1px solid var(--color-border-subtle);
}

@utility perf-category-label {
	@apply shrink-0 text-3xs font-semibold uppercase tracking-wide;
	width: 70px;
	color: var(--color-text);
}

@utility perf-category-bar-container {
	@apply flex-1 h-3 rounded overflow-hidden;
	background-color: var(--color-hover);
}

@utility perf-category-bar {
	@apply h-full rounded transition-all duration-300;
	min-width: 2px;
}

@utility perf-category-stats {
	@apply shrink-0 text-3xs font-medium tabular-nums;
	width: 90px;
	text-align: right;
	color: var(--color-text-subtle);
}

/* =================================
   SLOWEST OPERATIONS
   ================================= */

@utility perf-slowest-list {
	@apply flex flex-col rounded-lg border overflow-hidden;
	max-height: 150px;
	overflow-y: auto;
	border-color: var(--color-border-subtle);
	background-color: var(--color-bg-content);
	scrollbar-width: thin;
	scrollbar-color: var(--color-border) transparent;

	&::-webkit-scrollbar {
		width: 4px;
	}

	&::-webkit-scrollbar-track {
		background: transparent;
	}

	&::-webkit-scrollbar-thumb {
		background-color: var(--color-border);
		border-radius: 2px;
	}
}

@utility perf-slowest-item {
	@apply flex items-center gap-2 px-2 py-1.5 text-3xs;
	font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace;
	border-bottom: 1px solid var(--color-border-subtle);

	&:last-child {
		border-bottom: none;
	}
}

@utility perf-slowest-rank {
	@apply shrink-0 w-4 text-center font-semibold;
	color: var(--color-text-subtle);
}

@utility perf-slowest-category {
	@apply shrink-0 px-1 py-0.5 rounded text-3xs font-semibold uppercase;
	font-size: 0.5rem;
}

@utility perf-slowest-operation {
	@apply flex-1 truncate;
	color: var(--color-text);
}

@utility perf-slowest-duration {
	@apply shrink-0 font-medium tabular-nums;
	color: var(--color-text-subtle);
}

/* =================================
   RECENT TRACES
   ================================= */

@utility perf-traces-list {
	@apply flex flex-col rounded-lg border overflow-hidden;
	max-height: 120px;
	overflow-y: auto;
	border-color: var(--color-border-subtle);
	background-color: var(--color-bg-content);
	scrollbar-width: thin;
	scrollbar-color: var(--color-border) transparent;

	&::-webkit-scrollbar {
		width: 4px;
	}

	&::-webkit-scrollbar-track {
		background: transparent;
	}

	&::-webkit-scrollbar-thumb {
		background-color: var(--color-border);
		border-radius: 2px;
	}
}

@utility perf-trace-entry {
	@apply flex items-center gap-1.5 px-2 py-1 text-3xs cursor-pointer transition-colors duration-150;
	font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace;
	background-color: transparent;
	border: none;
	border-bottom: 1px solid var(--color-border-subtle);

	&:last-child {
		border-bottom: none;
	}

	&:hover {
		background-color: var(--color-hover);
	}
}

@utility perf-trace-time {
	@apply shrink-0;
	color: var(--color-text-subtle);
	font-variant-numeric: tabular-nums;
}

@utility perf-trace-category {
	@apply shrink-0 px-1 py-0.5 rounded text-3xs font-semibold uppercase;
	font-size: 0.5rem;
}

@utility perf-trace-operation {
	@apply flex-1 truncate;
	color: var(--color-text);
}

@utility perf-trace-duration {
	@apply shrink-0 font-medium tabular-nums;
	color: var(--color-text-subtle);
}

@utility perf-trace-expand {
	@apply shrink-0 w-4 h-4 flex items-center justify-center text-3xs font-bold;
	color: var(--color-text-subtle);
}

@utility perf-trace-metadata {
	@apply mx-2 mb-1 p-2 rounded text-3xs overflow-x-auto;
	background-color: var(--color-bg);
	border: 1px solid var(--color-border-subtle);
	color: var(--color-text-subtle);
	white-space: pre-wrap;
	word-break: break-word;
	max-height: 80px;
	margin-top: 0;
	font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace;
}

/* =================================
   EMPTY STATE
   ================================= */

@utility perf-empty {
	@apply flex flex-col items-center gap-1 py-8 text-center;
}

@utility perf-empty-title {
	@apply m-0 text-sm font-medium;
	color: var(--color-text);
}

@utility perf-empty-hint {
	@apply m-0 text-2xs;
	color: var(--color-text-subtle);
}

/* =================================
   LOADING STATE
   ================================= */

@utility perf-loading {
	@apply flex flex-col items-center gap-3 py-8 text-sm;
	color: var(--color-text-subtle);
}

/* =================================
   TOAST NOTIFICATION
   ================================= */

@utility perf-toast {
	@apply absolute bottom-2 left-1/2 -translate-x-1/2 flex items-center gap-1.5 px-3 py-2 rounded-lg text-xs font-medium shadow-lg;
	background-color: var(--color-success);
	color: white;
	animation: perf-toast-slide-up 0.3s ease;
}

@keyframes perf-toast-slide-up {
	from {
		opacity: 0;
		transform: translate(-50%, 10px);
	}
	to {
		opacity: 1;
		transform: translate(-50%, 0);
	}
}
